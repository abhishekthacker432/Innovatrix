var $body = $("body"), animatedEl = $body.find(".animated, .grid-item"), animatedText = $body.find(".animated-text"), $anchorSection = $body.find(".anchor-section"), $anchorLink = $body.find(".anchor-link"); function animateText() { animatedText.each(function () { var a = $(this), n = new TimelineLite, t = new SplitText(a, { type: "words,chars" }).chars; a.inViewport(function (i) { i > 0 && !a.hasClass("done-animating") && (a.css("opacity", 1), a.addClass("done-animating"), TweenMax.set(t, { y: 0, opacity: 1 }), n.staggerFrom(t, 1, { delay: .3, y: 80, opacity: 0, ease: Power3.easeOut }, .02, "+=0")) }) }) } function animateItems() { animatedEl.each(function () { var a = $(this); a.inViewport(function (n) { n > 0 && !a.hasClass("has-animated") && a.addClass("has-animated") }) }) } function anchorSections() { $anchorSection.inViewport(function (a) { var n = $(this).attr("id"); n && !1 === n.startsWith("#") && (n = "#" + n); var t = $anchorLink.filter(function () { return $(this).attr("href") === n }); a > 0 && a > window.innerHeight / 2 && !t.hasClass("active") && ($anchorLink.removeClass("active"), t.addClass("active")) }) }